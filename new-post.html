<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="Mum, how do I...?" content="cooking good is cooking mum's way"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta property="og:image" content="assets/favicon_io"/>
    <link rel="icon" type="image/png" sizes="180x180" href="assets/favicon_io/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon_io/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon_io/favicon-16x16.png"/>
    <link rel="stylesheet" href="css/styles.css"/>
    <link rel="stylesheet" href="css/new-post.css"/>
    <link rel="stylesheet" href="css/admin-bg-header.css"/>
    <title>Post new</title>
    <script type="module" src="javascript/utils.js" defer></script>
    <script type="module" src="javascript/functions.js" defer></script>
    <script type="module" src="javascript/admin-header.js" defer></script>
    <script type="module" src="javascript/edit-new-post.js" defer></script>

    <script src="https://kit.fontawesome.com/5d32d5fe01.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Beau+Rivage&family=Bebas+Neue&family=Bitter:ital,wght@0,100..900;1,100..900&display=swap"
          rel="stylesheet">
</head>
<body>

<header>
    <div class="header">
        <img class="logo" alt="logo" aria-label="logo of mum, how do I...?" src="assets/logo.png">
        <a href="admin.html" class="admin">
            <i class="fa-regular fa-user"></i>
            <h3>admin</h3>
        </a>
        <div class="user">
            <div id="admin-avatar" class="avatar"></div>
            <p id="admin-username" class="username">Panida</p>
            <button id="logout-btn" aria-label="click to logout">
                <i class="fa-solid fa-arrow-right-from-bracket"></i>
            </button>
        </div>
    </div>
    <div id="logout-box">
        <h4>Do you want to logout?</h4>
        <div class="yes-no-btns-container">
            <button id="logout-confirm" class="btn-black">yes</button>
            <button id="logout-abort" class="btn-black">no</button>
        </div>
    </div>
</header>

<main>
    <div class="back-to-admin-btn-container">
        <button class="btn-black" id="back-to-admin">
            < Back to admin
        </button>
    </div>
    <h2>new Blog Post</h2>
    <form id="blog-post-form">
        <div class="title">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required>
        </div>
        <div class="img-url">
            <label for="imageUrl">Image URL:</label>
            <input type="url" id="imageUrl" name="imageUrl">
        </div>
        <div class="body-container">
            <label for="body">Content:</label>
            <textarea id="body" name="content" rows="4" cols="50" required></textarea><br><br>
        </div>
        <div class="tags">
            <label for="tags">Tags:</label>
            <input type="text" id="tags" name="tags">
        </div>
        <div class="btns-container">
            <button id="preview-btn" class="btn-black">preview</button>
            <button type="submit" class="btn-black">post</button>
        </div>
    </form>

    <div id="overlay"></div>

    <div id="preview">
            <h3 id="preview-title"></h3>
            <div id="preview-img"></div>
            <p id="preview-body"></p>
        <div class="btns-container">
            <button id="preview-close-btn" class="btn-black">close</button>
        </div>
    </div>

    <div id="post-success">
        <h4>
           New blog has been posted!
        </h4>
        <button id="success-close-btn" class="btn-black">close</button>
    </div>
</main>

</body>

<!--Added script here due to using the same js as edit-post but different method for API to avoid error line-->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const editFormData = document.getElementById('edit-form');
        editFormData.addEventListener('submit', handleFormSubmission("PUT", "new-post"));
    });
</script>
</html>